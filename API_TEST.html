<!DOCTYPE html>
<html lang="en">
  <head>
    <title>TimelineJS: API Test</title>
    <meta charset="utf-8">
    <meta name="description" content="TimelineJS Embed">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-touch-fullscreen" content="yes">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">
    <!-- CSS-->
    <link rel="stylesheet" href="build/css/timeline.css?v1">
    <!--FONT-->
    <link rel="stylesheet" href="http://fonts.googleapis.com/css?family=Bevan%7CPontano+Sans&amp;amp;subset=latin,latin">
    <!-- Style-->
    <style>
      html, body {
      	height:100%;
      	width:100%;
      	padding: 0px;
      	margin: 0px;
      }
      .vco-timeline {
      
      }
      
      #timeline {
        height: 600px;
       }
      #panel {
        background: #fdfdfd;;
        height: 96px;
        padding: 6px 4px;
        border-top: 1px solid black;
        -webkit-box-sizing: border-box;
        -moz-box-sizing: border-box;
        -ms-box-sizing: border-box;
        -o-box-sizing: border-box;
        box-sizing: border-box;
    }
      
    </style>
    <!-- HTML5 shim, for IE6-8 support of HTML elements-->
    <!--if lt IE 9
    script(src='http://html5shim.googlecode.com/svn/trunk/html5.js')
    
    -->
  </head>
  <body>
    <div id="timeline"></div>
    <div id="panel">
        <div style="display: inline-block;">
            <button id="goToStart">goToStart</button>
            <button id="goToPrev">goToPrev</button>
            <button id="goToNext">goToNext</button>
            <button id="goToEnd">goToEnd</button>
            <br>
            
            <input id="slide_index" type="text" placeholder="slide index" style="width: 194px;" />
            <button id="goTo" style="width: 100px;">goTo</button>
            <button id="getData" style="width: 100px;">getData</button>
            <button id="getSlide" style="width: 100px;">getSlide</button>
            <button id="removeSlide" style="width: 100px;">removeSlide</button>
            <br>   
                     
            <select id="slide_id"  style="width: 200px;"></select>
            <button id="goToId" style="width: 100px;">goToId</button>
            <button id="getDataId" style="width: 100px;">getDataId</button>
            <button id="getSlideId" style="width: 100px;">getSlideId</button>
            <button id="removeSlideId" style="width: 100px;">removeSlideId</button>
        </div>
        <!--
        <div style="display: inline-block;">
            <em>objects are output to console...</em>
            <br>
            <input id="slide_index" type="text" placeholder="slide index"/>
            <br>
            
            <input id="slide_id" type="text" placeholder="slide id" />
                <button id="getDataId" style="width: 100px;">getDataId</button>
                <button id="getSlideId" style="width: 100px;">getSlideId</button>
                <button id="removeSlideId" style="width: 100px;">removeSlideId</button>
            <br>
        </div>
        -->
    </div>
    
    <!-- JavaScript-->
    <script src="build/js/timeline.js"></script>
    <script>
    
    $('#goToStart').click(function(event) {
        timeline.goToStart();
    });
    $('#goToPrev').click(function(event) {
        timeline.goToPrev();
    });
    $('#goToNext').click(function(event) {
        timeline.goToNext();
    });
    $('#goToEnd').click(function(event) {
        timeline.goToEnd();
    });
    
    //
    // by index
    //
    $('#goTo').click(function(event) {
         timeline.goTo(parseInt($('#slide_index').val())); 
    });  
    $('#getData').click(function(event) {
        console.log(timeline.getData(parseInt($('#slide_index').val())));
    });
    $('#getSlide').click(function(event) {
        console.log(timeline.getSlide(parseInt($('#slide_index').val())));
    });
    $('#removeSlide').click(function(event) {
        console.log(timeline.remove(parseInt($('#slide_index').val())));
        init_slide_menu();
    });

    //
    // by id
    //
    $('#goToId').click(function(event) {
         timeline.goToId($('#slide_id').val()); 
    });        
    $('#getDataId').click(function(event) {
        console.log(timeline.getDataId($('#slide_id').val()));
    });
    $('#getSlideId').click(function(event) {
        console.log(timeline.getSlideId($('#slide_id').val()));
    });
    $('#removeSlideId').click(function(event) {
        console.log(timeline.removeId($('#slide_id').val()));
        init_slide_menu();
    });
    
    // List of events to look for
    var event_list = [
        'back_to_start',
        'change',
        'color_change',
        'dataloaded',
        'hash_updated',
        // 'loaded', special handling
        'zoom_in',
        'zoom_out'
    ];
    
    // Log event details
    function log_event(data) {
        var s = 'EVENT='+data.type;       
        for(var key in data) {
            if(key != 'target' && key != 'type') {
                s += ', '+key+'='+data[key];
            }
        }    
        console.log(s);
    }
    
    // Build slide_id menu
    function init_slide_menu() {
        var slides = timeline.config.slides;
        var html = '';
        
        for(var i = 0, id; i < slides.length; i++) {
            id = slides[i].uniqueid;
            html += '<option value="'+id+'">'+id+'</option>';
        }
                
        $('#slide_id').html(html);        
    }
    
        
    var timeline = new VCO.Timeline('timeline', 'compiled/examples/marktwain_juked.json', {});
    
    // Build id select elements from data
    timeline.on('loaded', function(data) {
        console.log('EVENT=loaded', data);
        init_slide_menu();
     });
    
    // Set event handlers
    for(var i = 0; i < event_list.length; i++) {
        timeline.on(event_list[i], log_event);
    }

    
    window.onresize = function(event) {
        timeline.updateDisplay();
    }
    </script>
  </body>
</html>